---
import BaseLayout from "../layouts/BaseLayout.astro";
import { categories, todaysEvents, getEventsByCategory } from "../data/events.js";
---

<BaseLayout title="what TO do - Today's Events">
	<div class="container" style="padding: 2rem 1rem;">
	<!-- Events Grouped by Category -->
    <div class="events-container">
      <h2 class="page-title">Today's Events ({todaysEvents.length})</h2>
      
      {categories.map(category => {
        const categoryEvents = getEventsByCategory(category.id);
        
        if (categoryEvents.length === 0) return null;
        
        return (
          <section class="category-section">
            <h3 class="category-title">
              <span class="category-icon">{category.icon}</span>
              {category.name}
              <span class="category-count">({categoryEvents.length})</span>
            </h3>
            
            <div class="events-grid">
              {categoryEvents.map(event => (
                <div class="event-card">
                  <h4 class="event-title">{event.title}</h4>
                  <div class="event-meta">
                    <div class="event-time">{event.time}</div>
                    <div class="event-price">{event.price}</div>
                  </div>
                  <div class="event-location">{event.location}</div>
                  <div class="event-address">{event.address}</div>
                </div>
              ))}
            </div>
          </section>
        );
      })}
    </div>
		 

		 <!-- No Events Message -->
		  <section class="no-events-cta" style="margin-top: 3rem; padding: 2rem; background: #f8fafc; border-radius: 8px; text-align: center;">
			<h3 style="margin-bottom: 1rem; color: #374151;">Not finding what you're looking for?</h3>
			<p style="color: #6b7280; margin-bottom: 1.5rem;">Check out our curated list of things to do in Toronto anytime.</p>
			<a href="/things-to-do" class="cta-butotn">Browse Things to Do</a>
		  </section>
	</div>

	<style>
		.events-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 2rem;
    }
    
    .page-title {
      font-size: 2rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 2.5rem;
      text-align: center;
    }
    
    .category-section {
      margin-bottom: 3rem;
    }
    
    .category-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.5rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #e5e5e5;
    }
    
    .category-icon {
      font-size: 1.25rem;
    }
    
    .category-count {
      color: #6b7280;
      font-size: 1rem;
      font-weight: 500;
    }
    
    .events-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    
    .event-card {
      background: white;
      border: 1px solid #e5e5e5;
      border-radius: 8px;
      padding: 1.5rem;
      transition: all 0.2s ease;
      height: fit-content;
    }
    
    .event-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }
    
    .event-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #1f2937;
      line-height: 1.3;
      margin-bottom: 1rem;
    }
    
    .event-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }
    
    .event-time {
      color: #4b5563;
      font-weight: 500;
      font-size: 0.95rem;
    }
    
    .event-price {
      background: #dbeafe;
      color: #1e40af;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.9rem;
      font-weight: 600;
      white-space: nowrap;
    }
    
    .event-location {
      color: #374151;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }
    
    .event-address {
      color: #6b7280;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    
    .cta-button {
      display: inline-block;
      background: #3b82f6;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: background 0.2s ease;
    }
    
    .cta-button:hover {
      background: #2563eb;
    }
    
    /* Responsive breakpoints */
    @media (min-width: 768px) {
      .events-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (min-width: 1024px) {
      .events-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      .events-container {
        padding: 0 1rem;
      }
      
      .events-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .event-card {
        padding: 1rem;
      }
      
      .event-title {
        font-size: 1rem;
      }
      
      .event-meta {
        flex-direction: column;
        align-items: start;
        gap: 0.5rem;
      }
      
      .page-title {
        font-size: 1.5rem;
      }
      
      .category-title {
        font-size: 1.25rem;
      }
    }
	</style>

</BaseLayout>
